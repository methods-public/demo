OPTIONS=--loglevel=<%= node['cookbook-openshift3']['openshift_node_debug_level'] %>
# /etc/origin/node/ should contain the entire contents of
# /var/lib/origin.local.certificates/node-${node-fqdn} generated by
# running 'atomic-enterprise admin create-node-config' on your master
#
# If if your node is running on a separate host you can rsync the contents
# rsync -a root@atomic-enterprise-master:/var/lib/origin/origin.local.certificates/node-`hostname`/ /etc/origin/node
CONFIG_FILE=<%= node['cookbook-openshift3']['openshift_node_config_file'] %>
<% if node['cookbook-openshift3']['deploy_containerized'] %>
IMAGE_VERSION=<%= node['cookbook-openshift3']['openshift_docker_image_version'] %>
<% end -%>
<% if defined?(@aws_access_key_id) && defined?(@aws_secret_access_key) %>

AWS_ACCESS_KEY_ID=<%= @aws_access_key_id %>
AWS_SECRET_ACCESS_KEY=<%= @aws_secret_access_key %>
<% end -%>

# The $DOCKER_NETWORK_OPTIONS variable is used by sdn plugins to set
# $DOCKER_NETWORK_OPTIONS variable in the /etc/sysconfig/docker-network
# Most plugins include their own defaults within the scripts
# TODO: More elegant solution like this
# https://github.com/coreos/flannel/blob/master/dist/mk-docker-opts.sh
# DOCKER_NETWORK_OPTIONS='-b=lbr0 --mtu=1450'

# Proxy configuration
# Origin uses standard HTTP_PROXY environment variables. Be sure to set
# NO_PROXY for your master
<% if node['cookbook-openshift3']['openshift_no_proxy'].empty? -%>
#NO_PROXY=master.example.com
<% else -%>
NO_PROXY=<%= [
  node['cookbook-openshift3']['openshift_no_proxy'].split(','),
  node['cookbook-openshift3']['openshift_common_api_hostname'],
  node['cookbook-openshift3']['master_servers'].map { |server| server['fqdn'] },
  node['cookbook-openshift3']['node_servers'].map { |server| server['fqdn'] },
  ".#{node['cookbook-openshift3']['osn_cluster_dns_domain']}",
  node['cookbook-openshift3']['openshift_common_portal_net'],
  node['cookbook-openshift3']['openshift_master_sdn_cluster_network_cidr']
].flatten.uniq.join(',') %>
<% end %>
<% if node['cookbook-openshift3']['openshift_http_proxy'].empty? -%>
#HTTP_PROXY=http://USER:PASSWORD@IPADDR:PORT
<% else -%>
HTTP_PROXY=<%= node['cookbook-openshift3']['openshift_http_proxy'] %>
<% end %>
<% if node['cookbook-openshift3']['openshift_https_proxy'].empty? -%>
#HTTPS_PROXY=https://USER:PASSWORD@IPADDR:PORT
<% else -%>
HTTPS_PROXY=<%= node['cookbook-openshift3']['openshift_https_proxy'] %>
<% end %>
