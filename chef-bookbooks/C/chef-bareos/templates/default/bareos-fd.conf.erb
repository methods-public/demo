<%# FILE DAEMON TEMPLATE %>
# Generated by Chef for <%= node['bareos']['clients']['name'] %>-fd
# Local modifications will be overwritten.
#
# Bareos Client FileDaemon Configuration File

FileDaemon {
  Name = "<%= node['bareos']['clients']['name'] %>-fd"
  FDPort = <%= node['bareos']['clients']['fd_port'] %>
  Maximum Concurrent Jobs = <%= node['bareos']['clients']['max_concurrent_jobs'] %>
  Heartbeat Interval = <%= node['bareos']['clients']['heartbeat_interval'] %>
}

<% @bareos_dir.each do |director| %>
##########
# Director/Monitor Resources for <%= director['bareos']['director']['name'] %>
##########
Director {
  Name = <%= director['bareos']['director']['name'] %>-dir
  Password = "<%= node['bareos']['fd_password'] %>"
}

Director {
  Name = <%= director['bareos']['director']['name'] %>-mon
  Password = "<%= director['bareos']['mon_password'] %>"
  Monitor = <%= node['bareos']['storage']['sd_mon_enable'] %>
}

Messages {
  Name = <%= node['bareos']['messages']['default_messages'] %>
  director = <%= director['bareos']['director']['name'] %>-dir = <%= node['bareos']['messages']['default_admin_messages'] %>
}
<% end %>
