{
  "name": "secrets_management",
  "description": "A resource provider for global secrets management",
  "long_description": "# secrets_management\n### _A Chef library for global secrets management_\n\nThis cookbook provides a Ruby library helper to support management of Hashicorp Vault, Chef Vault, and Chef DataBag items.  This cookbook does not include resources or recipes.  The purpose of this project is to simplify the handling of secrets and data management by integrating a single method whereby Hashicorp Vault, Chef Vault, and Chef DataBag items can be managed.\n\n**Table of Contents**  *generated with [DocToc](https://github.com/thlorenz/doctoc)*\n\n- [Requirements](#requirements)\n  - [Platforms](#platforms)\n  - [Chef](#chef)\n  - [Cookbooks](#cookbooks)\n- [Usage](#usage)\n  - [default](#default)\n- [Libraries](#libraries)\n  - [SecretsManagement::DSL](#secretsmanagementdsl)\n- [Upload to Chef Server](#upload-to-chef-server)\n- [Upload to Private Chef Supermarket](#upload-to-private-chef-supermarket)\n- [Cookbook Testing](#cookbook-testing)\n  - [Before you begin](#before-you-begin)\n  - [Data_bags for Test-Kitchen](#data_bags-for-test-kitchen)\n  - [Rakefile and Tasks](#rakefile-and-tasks)\n  - [Chefspec and Test-Kitchen](#chefspec-and-test-kitchen)\n  - [Test Cookbook (secrets_management_test)](#test-cookbook-secrets_management_test)\n  - [Compliance Profile](#compliance-profile)\n- [Contribute](#contribute)\n- [License & Authors](#license-&-authors)\n\n## Requirements\n\n### Platforms\n\nThis resource should work on any Chef supported platform with a Chef Client meeting the minimum requirements.\n\n### Chef\n\n- 12.5+\n\n### Cookbooks\n\n- chef-vault, '~> 3.0'\n\n## Usage\nTo use the libraries, declare a dependency on this cookbook, and then use the libary as described in the section [SecretsManagement::DSL](#secretsmanagementdsl).\n\n### default\n\nThis is an empty recipe and should _not_ be modified.\n\n## Libraries\n\n### SecretsManagement::DSL\n\n#### open_secret_item\nThe `open_secret_item` method supports accessing existing Hashicorp Vault, Chef Vault, and Chef DataBag items.  The method supports two possible models for getting the data - `determine_bag_type` or `find_<type>_item`.  By default, the method will attempt to perform the lookup unless the attribute `:type` is sent.\n\nProperties:\n\n| Name          | Description | Type  | Mandatory |\n| ---           | ---         | ---   | ---       |\n| **container** | Path to Hashicorp Vault or the Name of the Chef Vault or DataBag | String | X |\n| **item**      | Item name in Vault or Bag | String | X |\n| type          | Supported values: `vault` (Hashicorp), `chef_vault`, or `data_bag` | String |           |\n| vault         | Hash of supported keys for accessing Hashicorp environment.  Minimum required keys are `address` and `token`. | Hash   |           |\n\n_Note: When returning details from Hashicorp Vault, this library will normalize the key names as strings.  By default, the keys will be returned as a symbol.  To keep this output consistent across the ChefVault and DataBag models, the library converts the keys from symbols to strings._\n\n#### Examples\n\n```ruby\n# Open a secret item based on testing the options - vault, chef_vault, then data_bag\nbag = open_secret_item('secret', 'item')\n\n# Include a vault object to support looking into Hashicorp as part of the lookup\nbag = open_secret_item('secret', 'item', vault: { 'token' => '1234', 'address' => 'http://192.168.0.1:8200' })\n```\n\n```ruby\n# Look up a data_bag item\nbag = open_secret_item('simple', 'item', type: 'data_bag')\n```\n\n```ruby\n# Lookup a chef_vault item\nbag = open_secret_item('secrets', 'bacon', type: 'chef_vault')\n```\n\n```ruby\n# Lookup a chef_vault item and use the output to access a Hashicorp Vault item\nvault_hash = open_secret_item('vault', 'secret', type: 'chef_vault')\nbag = open_secret_item('secret/chef/os', 'windows', type: 'vault', vault: vault_hash)\n```\n\n## Upload to Chef Server\nThis cookbook should be included in each organization of your CHEF environment.  When importing, leverage Berkshelf:\n\n`berks upload --except test`\n\n_NOTE:_ use the --no-ssl-verify switch if the CHEF server in question has a self-signed SSL certificate.\n\n`berks upload --no-ssl-verify --except test`\n\n## Upload to Private Chef Supermarket\n_NOTE:_ You must set the following key `knife[:supermarket_site] = 'https://<your-supermarket-server>'`.\n\nThis cookbook should be uploaded to the CHEF Supermarket server.  When importing, leverage Berkshelf vendor command:\n\n```bash\n# From a Linux/Mac host via Bash\nberks vendor .bundle\nfor i in `ls .bundle`; do knife cookbook site share $i \"Other\" -o .bundle; done\n```\nor\n\n```powershell\n# From a Windows host via PowerShell\nberks vendor .bundle\nforeach ($i in (Get-ChildItem -Path .bundle) ){\n  knife cookbook site share $i \"Other\" -o .bundle\n}\n```\n\n## Cookbook Testing\n\n### Before you begin\nSetup your testing and ensure all dependencies are installed.  Open a terminal windows and execute:\n\n```ruby\ngem install bundler\nbundle install\nberks install\n```\n\n### Data_bags for Test-Kitchen\n\nThis cookbook requires the use of a data_bag for setting certain values.  Local JSON version need to be stored in the directory structure as indicated below:\n\n```\n├── chef-repo/\n│   ├── cookbooks\n│   │   ├── secrets_management\n│   │   │   ├── .kitchen.yml\n│   │   │   ├── test\n│   │   │   │   ├── fixtures\n│   │   │   │   │   ├── data_bags\n│   │   │   │   │   │   ├── data_bag_name\n│   │   │   │   │   │   │   ├── data_bag_item.json\n\n```\n\n**Note**: Storing local testing versions of the data_bags at the root of your repo is considered best practice.  This ensures that you only need to maintain a single copy while protecting the cookbook from being accientally committed with the data_bag.  However, since this cookbook contains no recipes, we have included the test data_bags for Kitchen purposes.  If you must change this location, then update the following key in the .kitchen.yml file.\n\n```\ndata_bags_path: \"test/fixtures/data_bags/\"\n```\n\n### Rakefile and Tasks\nThis repo includes a **Rakefile** for common tasks\n\n| Task Command | Description |\n| ------------- |-------------|\n| **rake** | Run Style, Foodcritic, Maintainers, and Unit Tests |\n| **rake style** | Run all style checks |\n| **rake style:chef** | Run Chef style checks |\n| **rake style:ruby** | Run Ruby style checks |\n| **rake style:ruby:auto_correct** | Auto-correct RuboCop offenses |\n| **rake unit** | Run ChefSpec examples |\n| **rake integration** | Run all kitchen suites |\n| **rake maintainers:generate** | Generate MarkDown version of MAINTAINERS file |\n\n### Chefspec and Test-Kitchen\n\n1. `bundle install`: Installs and pulls all ruby gems dependencies from the Gemfile.\n\n2. `berks install`: Installs all cookbook dependencies based on the [Berksfile](Berksfile) and the [metadata.rb](metadata.rb)\n\n3. `rake`: This will run all of the local tests - syntax, lint, unit, and maintainers file.\n4. `rake integration`: This will run all of the kitchen tests\n\n### Test Cookbook (secrets_management_test)\n_a test cookbook for the available LWRPs_\n\nThe cookbook secrets_management does not include any executable recipes as it is designed to be an utility cookbook and support other initiatives.  For the purposes of testing and validating this code, we have included a test cookbook with pre-configured recipes.\n\n| **Name** | **Description** |\n| ------------- |-------------|\n| _Default_ | Roll-up recipe to test all of the functionality of the LWRP-specific recipes |\n| _hashivault_ | Test gathering secrets from Hashicorp Vault environments. |\n| _chef_vault_ | Test gathering secrets from ChefVault bags |\n| _data_bag_ | Test gathering secrets from Chef DataBags |\n\n\n### Compliance Profile\nNot included as this is a Resource only cookbook with no included recipes.\n\n## Contribute\n - Fork it\n - Create your feature branch (git checkout -b my-new-feature)\n - Commit your changes (git commit -am 'Add some feature')\n - Push to the branch (git push origin my-new-feature)\n - Create new Pull Request\n\n## License & Authors\n\n**Author:** Jeremy Goodrum ([jeremy@exospheredata.com](mailto:jeremy@exospheredata.com))\n\n**Copyright:** 2017 Exosphere Data, LLC\n\n```text\nCopyright 2017 Exosphere Data, LLC\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of this\nsoftware and associated documentation files (the \"Software\"), to deal in the Software\nwithout restriction, including without limitation the rights to use, copy, modify,\nmerge, publish, distribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n```\n",
  "maintainer": "Exosphere Data, LLC",
  "maintainer_email": "chef@exospheredata.com",
  "license": "MIT",
  "platforms": {
    "debian": ">= 0.0.0",
    "ubuntu": ">= 0.0.0",
    "centos": ">= 0.0.0",
    "redhat": ">= 0.0.0",
    "amazon": ">= 0.0.0",
    "windows": ">= 0.0.0"
  },
  "dependencies": {
    "chef-vault": "~> 3.0"
  },
  "providing": {

  },
  "attributes": {

  },
  "recipes": {

  },
  "version": "1.0.0",
  "source_url": "https://github.com/exospheredata/secrets_management",
  "issues_url": "https://github.com/exospheredata/secrets_management/issues",
  "privacy": false,
  "chef_versions": [
    [
      ">= 12.5"
    ]
  ],
  "ohai_versions": [

  ],
  "gems": [
    [
      "vault",
      "~> 0.1"
    ]
  ]
}
