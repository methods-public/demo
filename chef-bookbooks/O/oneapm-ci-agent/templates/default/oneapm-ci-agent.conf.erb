# Generated by Chef, local modifications will be overwritten

[Main]
# The host of the OneAPM data collector server to send Agent data to
ci_url: <%= @ci_url %>

# If you need a proxy to connect to the Internet, provide the settings here
<% if node['oneapm-ci-agent']['web_proxy']['host'] -%>
proxy_host: <%= node['oneapm-ci-agent']['web_proxy']['host'] %>
proxy_port: <%= node['oneapm-ci-agent']['web_proxy']['port'] %>
proxy_user: <%= node['oneapm-ci-agent']['web_proxy']['user'] %>
proxy_password: <%= node['oneapm-ci-agent']['web_proxy']['password'] %>
<% else -%>
# proxy_host: my-proxy.com
# proxy_port: 3128
# proxy_user: user
# proxy_password: password
<% end -%>
# To be used with some proxys that return a 302 which make curl switch from POST to GET
<% if node['oneapm-ci-agent']['web_proxy']['proxy_forbid_method_switch'] -%>
proxy_forbid_method_switch: <%= node['oneapm-ci-agent']['web_proxy']['proxy_forbid_method_switch'] %>
<% else -%>
# proxy_forbid_method_switch: no
<% end -%>

# If you run the agent behind haproxy, you might want to set this to yes
<% if node['oneapm-ci-agent']['web_proxy']['skip_ssl_validation'] -%>
skip_ssl_validation: <%= node['oneapm-ci-agent']['web_proxy']['skip_ssl_validation'] %>
<% else -%>
# skip_ssl_validation: no
<% end -%>

# The OneAPM license key to associate your Agent's data with your organization.
license_key: <%= @license_key %>

# Force the hostname to whatever you want.
hostname: <%= node['oneapm-ci-agent']['hostname'] %>

tags: <%= node['oneapm-ci-agent']['tags'] %>

# ========================================================================== #
# Logging
# ========================================================================== #

log_level: <%= node['oneapm-ci-agent']['log_level'] %>

# collector_log_file: /var/log/oneapm-ci-agent/collector.log
# forwarder_log_file: /var/log/oneapm-ci-agent/forwarder.log
# onestatsd_log_file: /var/log/oneapm-ci-agent/onestatsd.log

# if syslog is enabled but a host and port are not set, a local domain socket
# connection will be attempted
#
log_to_syslog: <%= node['oneapm-ci-agent']['syslog']['active'] ? 'yes' : 'no' %>
<% if node['oneapm-ci-agent']['syslog']['udp'] -%>
syslog_host: <%= node['oneapm-ci-agent']['syslog']['host'] %>
syslog_port: <%= node['oneapm-ci-agent']['syslog']['port'] %>
<% end -%>
